(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{415:function(t,e,n){"use strict";n.r(e);var o=n(10),r=(n(40),n(41),n(13),n(398),n(24),n(25),n(400),n(324),n(34),n(72),{data:function(){return{test:"",regiones:[{id:"0",name:"Desconocido"},{id:"1",name:"Region 1"},{id:"2",name:"Region 2"},{id:"3",name:"Region 3"},{id:"4",name:"Region 4"},{id:"5",name:"Region 5"},{id:"6",name:"Region 6"},{id:"7",name:"Region 7"},{id:"8",name:"Region 8"},{id:"9",name:"Region 9"}],region:null,compliant:0,notCompliant:0,checked:[],columns:[],isPaginated:!0,isPaginationSimple:!1,isPaginationRounded:!1,paginationPosition:"bottom",defaultSortDirection:"asc",sortIcon:"arrow-up",sortIconSize:"is-small",currentPage:1,perPage:10,hasInput:!1,paginationOrder:"",inputPosition:"",inputDebounce:"",checkboxPosition:"right"}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,c,l,d,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,o=t.params,e.next=3,n.$get("https://kevinzepeda.github.io/etl-test/nokia.json");case 3:return r=e.sent,e.next=6,n.$get("https://kevinzepeda.github.io/etl-test/devices.json").then((function(t){return t.filter((function(t){return t.region==o.id}))}));case 6:return c=e.sent,l=r.reduce((function(t,e){var n,o=e.region;return t[o]=null!==(n=t[o])&&void 0!==n?n:[],t[o].push(e),t}),{}),d=l[o.id]?l[o.id]:[],f=d.reduce((function(t,e){var n,o=e.source_ip;return t[o]=null!==(n=t[o])&&void 0!==n?n:[],t[o].push(e),t}),{}),h={responsive:!0,maintainAspectRatio:!1,devicePixelRatio:2,tooltips:{enabled:!0},title:{display:!0,text:"% Compliance by region",position:"bottom",fontSize:20}},e.abrupt("return",{dataByRegion:d,options:h,allDevices:c,groupByIP:f});case 12:case"end":return e.stop()}}),e)})))()},methods:{pieData:function(t){return null!==this.region&&(this.compliant=(t.filter((function(i){return i.is_compliant})).length/t.length*100).toFixed(1),this.notCompliant=(100-this.compliant).toFixed(1)),{hoverBackgroundColor:"red",hoverBorderWidth:5,labels:["Compliance","Not QoS"],datasets:[{label:"Data One",backgroundColor:["#41B883","#E46651"],data:[this.compliant,this.notCompliant]}]}},getFile:function(){this.$axios.post("https://5c92-2806-105e-c-7a1b-3b3b-4664-9df7-4ca9.ngrok.io/",{items:this.toCreateMOP},{responseType:"blob"}).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data],{type:"application/zip"}));window.open(e)}))}},computed:{toCreateMOP:function(){var t=[];return this.checked.forEach((function(i){t.push(i.source_ip)})),this.dataByRegion.filter((function(i){return!i.is_compliant&&i.mobile&&t.includes(i.source_ip)}))}},fetch:function(){this.region=this.$route.params.id}}),c=n(51),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-9"},[n("h1",{staticClass:"title"},[t._v("Region "+t._s(t.region))])]),n("div",{staticClass:"column is-3"},[n("div",{staticClass:"buttons mt-2",attrs:{align:"is-left"}},[t.checked.length?n("b-button",{staticClass:"is-danger",on:{click:function(e){t.checked=[]}}},[t._v("Clear all")]):n("b-button",{staticClass:"is-info is-light",on:{click:function(e){t.checked=t.allDevices.filter((function(t){return 0===t.is_compliant}))}}},[t._v("Select all")]),n("b-button",{staticClass:"is-info",attrs:{disabled:0===t.checked.length},on:{click:function(e){return t.getFile()}}},[t._v("Generate MOP")])],1)])]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("h2",{staticClass:"subtitle"},[t._v("All Devices: "),n("b",[t._v(t._s(t.allDevices.length))])]),n("b-table",{attrs:{data:t.allDevices,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"pagination-position":t.paginationPosition,"default-sort-direction":t.defaultSortDirection,"pagination-rounded":t.isPaginationRounded,"sort-icon":t.sortIcon,"sort-icon-size":t.sortIconSize,"detail-key":"entry","default-sort":"user.first_name","aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page","page-input":t.hasInput,"pagination-order":t.paginationOrder,"page-input-position":t.inputPosition,"debounce-page-input":t.inputDebounce,"checked-rows":t.checked,checkable:"","is-row-checkable":function(t){return 0===t.is_compliant},"checkbox-position":t.checkboxPosition},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:checkedRows":function(e){t.checked=e},"update:checked-rows":function(e){t.checked=e}},scopedSlots:t._u([{key:"bottom-left",fn:function(){return[n("b",[t._v(" Checked rows: "+t._s(t.checked.length))])]},proxy:!0},{key:"empty",fn:function(){return[n("div",{staticClass:"has-text-centered"},[t._v("No Devices info")])]},proxy:!0}])},[n("b-table-column",{attrs:{field:"sysname",label:"Sysname",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("nuxt-link",{attrs:{to:"/device/"+e.row.source_ip}},[t._v(t._s(e.row.sysname))])]}}])}),n("b-table-column",{attrs:{field:"source_ip",label:"IP",width:"40",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("nuxt-link",{attrs:{to:"/device/"+e.row.source_ip}},[t._v(t._s(e.row.source_ip))])]}}])}),n("b-table-column",{attrs:{field:"type",label:"Type",width:"40",numeric:"",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("p",[t._v(t._s(e.row.type))])]}}])}),n("b-table-column",{attrs:{field:"is_compliant",label:"Mobile",width:"40",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[100==(t.groupByIP[e.row.source_ip].filter((function(i){return i.is_compliant&&i.mobile})).length/t.groupByIP[e.row.source_ip].filter((function(i){return i.mobile})).length*100).toFixed(1)?n("span",{staticClass:"tag is-success is-light"},[t._v("100 %")]):n("span",{staticClass:"tag is-danger is-light"},[t._v(t._s((t.groupByIP[e.row.source_ip].filter((function(i){return i.is_compliant&&i.mobile})).length/t.groupByIP[e.row.source_ip].filter((function(i){return i.mobile})).length*100).toFixed(1))+" %")])]}}])}),n("b-table-column",{attrs:{field:"is_compliant",label:"Compliance",width:"40",sortable:"",searchable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_compliant?n("span",{staticClass:"tag is-success"},[t._v("100 %")]):n("span",{staticClass:"tag is-danger"},[t._v(t._s((t.groupByIP[e.row.source_ip].filter((function(i){return i.is_compliant})).length/t.groupByIP[e.row.source_ip].length*100).toFixed(1))+" %")])]}}])})],1)],1),n("div",{staticClass:"column is-3"},[n("div",{staticClass:"h2 subtitle"},[t._v("Region compliance")]),n("div",{staticClass:"container"},[n("p",[t._v("Compliance: "),n("b",[t._v(t._s(t.compliant)+"%")])]),n("p",[t._v("Not QoS: "),n("b",[t._v(t._s(t.notCompliant)+"%")])]),n("p",[t._v("___")]),n("pie-chart",{attrs:{data:t.pieData(t.dataByRegion),options:t.options}})],1)])])])}),[],!1,null,null,null);e.default=component.exports}}]);